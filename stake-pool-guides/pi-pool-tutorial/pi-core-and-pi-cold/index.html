<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">OLD GUIDE TO BE DELETED | Armada Alliance Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://armada-alliance.com/img/armada-alliance-logo.png"><meta data-rh="true" name="twitter:image" content="https://armada-alliance.com/img/armada-alliance-logo.png"><meta data-rh="true" property="og:url" content="https://armada-alliance.com/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="OLD GUIDE TO BE DELETED | Armada Alliance Docs"><meta data-rh="true" name="description" content="Create operational keys &amp; certificates. Create wallet &amp; register stake pool"><meta data-rh="true" property="og:description" content="Create operational keys &amp; certificates. Create wallet &amp; register stake pool"><link data-rh="true" rel="icon" href="/docs/img/armada-alliance-logo.png"><link data-rh="true" rel="canonical" href="https://armada-alliance.com/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold"><link data-rh="true" rel="alternate" href="https://armada-alliance.com/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold" hreflang="en"><link data-rh="true" rel="alternate" href="https://armada-alliance.com/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QTMN0FOYD2-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-20GWM641V6"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-20GWM641V6",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Armada Alliance Docs" href="/docs/opensearch.xml"><link rel="stylesheet" href="/docs/assets/css/styles.3f9bee87.css">
<script src="/docs/assets/js/runtime~main.d2f58152.js" defer="defer"></script>
<script src="/docs/assets/js/main.9c68330c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/armada-alliance-logo.png" alt="Armada Alliance ship logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/img/armada-alliance-logo.png" alt="Armada Alliance ship logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Armada Alliance Docs</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a href="https://armada-alliance.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Armada Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/armada-alliance/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>OLD GUIDE TO BE DELETED</h1>
<h1>Pi-Core/Cold</h1>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>You need to have a Pi-Node configured with a new static ip address on your LAN. A fully qualified domain name and cardano-service file set to start on port 3000. You also need to update the env file used by gLiveView.sh located in $NODE_HOME/scripts.</p><p>You do not enable the topology updater service on a core node so feel free to delete those two scripts and remove the commented out cron job.</p><p>Make sure your core node is synced to the tip of the blockchain.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>There exists a way to create your pool wallets <strong>payment keypair</strong> by creating a wallet in Yoroi and using cardano-wallet to extract the key pair from the mnemonic seed from Yoroi. This allows you to have a seed backup of the wallet and to also easily extract rewards or send funds elsewhere. You can do this with any shelley era mnemonic seed. I prefer Yoroi because it is quick.</p><p><a href="https://gist.github.com/ilap/3fd57e39520c90f084d25b0ef2b96894" target="_blank" rel="noopener noreferrer">https://gist.github.com/ilap/3fd57e39520c90f084d25b0ef2b96894​</a></p><p>Cardano-wallet will not build on arm due to dependency failure. @ZW3RK tried to build it for us and it would not. You may want to install cardano-wallet on an offline x86 machine and go through this process. That is how I did it. You can get cardano-wallet binary below.</p><p><a href="https://hydra.iohk.io/build/3770189" target="_blank" rel="noopener noreferrer">https://hydra.iohk.io/build/3770189</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-blockfetch-tracing">Enable blockfetch tracing<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#enable-blockfetch-tracing">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sed -i $\{%NODE_FILES}/$\{%NODE_CONFIG}-config.json \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e &quot;s/TraceBlockFetchDecisions\&quot;: false/TraceBlockFetchDecisions\&quot;: true/g&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="generate-keys--issue-operational-certificate">Generate Keys &amp; Issue Operational Certificate<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#generate-keys--issue-operational-certificate">​</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rotating-the-kes-keys">Rotating the KES keys<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#rotating-the-kes-keys">​</a></h4><p>KES keys need to be regenerated and a new <strong>pool.cert</strong> needs to be issued and submitted to the chain every 90 days. The <strong>node.counter</strong> file keeps track of how many times this has been done.</p></div></div>
<p>Generate a KES key pair: <strong>kes.vkey</strong> &amp; <strong>kes.skey</strong></p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd $\{%NODE_HOME}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli node key-gen-KES \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --verification-key-file kes.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --signing-key-file kes.skey</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Generate a node cold key pair: <strong>node.vkey</strong>, <strong>node.skey</strong> and <strong>node.counter</strong> file on your Cold Offline machine.</p>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir $\{%HOME}/cold-keys</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd cold-keys</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli node key-gen \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cold-verification-key-file node.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cold-signing-key-file node.skey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --operational-certificate-issue-counter node.counter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="variables-for-guide-interopability">Variables for guide interopability<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#variables-for-guide-interopability">​</a></h2>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>In order for these commands to work on mainnet &amp; testnet we have to set the $CONFIG_NET variable and the $MAGIC variable.
This is because on testnet we are required to use --testnet-magic $MAGIC, where MAGIC= the magic value found in your ${%NODE_CONFIG}-shelley-genesis.json.</p><p>The official docs do not do this for some reason and I don&#x27;t want to write this all out twice. If working through documentation elsewhere please substitute ${%NODE_CONFIG} with ${%CONFIG_NET} when submitting to the chain on testnet. For mainnet disregard /rant.</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo export MAGIC=$(cat $\{%NODE_FILES}/$\{%NODE_CONFIG}-shelley-genesis.json | jq -r &#x27;.networkMagic&#x27;) &gt;&gt; $\{%HOME}/.adaenv; . $\{%HOME}/.adaenv</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if [[ $\{%NODE_CONFIG} = &#x27;testnet&#x27; ]]; then echo export CONFIG_NET=&#x27;testnet-magic\ $\{%MAGIC}&#x27;; else echo export CONFIG_NET=mainnet; fi &gt;&gt; $\{%HOME}/.adaenv; . $\{%HOME}/.adaenv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Create variables with the number of slots per KES period from the genesis file and current tip of the chain.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">slotsPerKesPeriod=$(cat $\{%NODE_FILES}/$\{%NODE_CONFIG}-shelley-genesis.json | jq -r &#x27;.slotsPerKESPeriod&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">slotNo=$(cardano-cli query tip --$\{%CONFIG_NET} | jq -r &#x27;.slot&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo slotsPerKesPeriod: $\{%slotsPerKesPeriod}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo slotNo: $\{%slotNo}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Set the <strong>startKesPeriod</strong> variable by dividing <strong>slotNo</strong> / <strong>slotsPerKESPeriod</strong>.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">startKesPeriod=$(($\{%slotNo} / $\{%slotsPerKesPeriod}))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo startKesPeriod: $\{%startKesPeriod}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Write <strong>startKesPeriod</strong> value down &amp; copy the <strong>kes.vkey</strong> to your cold offline machine.</p>
<p>Issue a <strong>node.cert</strong> certificate using: <strong>kes.vkey</strong>, <strong>node.skey</strong>, <strong>node.counter</strong> and <strong>startKesPeriod</strong> value.</p>
<p>Replace <strong>startKesPeriod</strong> with the value you wrote down.</p>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli node issue-op-cert \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --kes-verification-key-file kes.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cold-signing-key-file $\{%HOME}/cold-keys/node.skey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --operational-certificate-issue-counter $\{%HOME}/cold-keys/node.counter \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --kes-period &lt;startKesPeriod&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file node.cert</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Copy <strong>node.cert</strong> to your Core machine.</p>
<p>Generate a VRF key pair.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli node key-gen-VRF \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --verification-key-file vrf.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --signing-key-file vrf.skey</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>For security purposes the <strong>vrf.skey</strong> <strong>needs</strong> read only permissions or cardano-node will not start.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod 400 vrf.skey</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Edit the cardano-service startup script by adding <strong>kes.skey</strong>, <strong>vrf.skey</strong> and <strong>node.cert</strong> to the cardano-node run command and changing the port it listens on.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">nano $\{%HOME}/.local/bin/cardano-service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">TOPOLOGY=$\{%NODE_FILES}/$\{%NODE_CONFIG}-topology.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DB_PATH=$\{%NODE_HOME}/db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONFIG=$\{%NODE_FILES}/$\{%NODE_CONFIG}-config.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">KES=$\{%NODE_HOME}/kes.skey</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">VRF=$\{%NODE_HOME}/vrf.skey</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CERT=$\{%NODE_HOME}/node.cert</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## +RTS -N4 -RTS = Multicore(4)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-node run +RTS -N4 -RTS \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --topology $\{%TOPOLOGY} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --database-path $\{%DB_PATH} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --socket-path $\{%CARDANO_NODE_SOCKET_PATH} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --port $\{%NODE_PORT} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --config $\{%CONFIG} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --shelley-kes-key $\{%KES} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --shelley-vrf-key $\{%VRF} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --shelley-operational-certificate $\{%CERT}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Change the port to 3000 in the .adaenv file.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">nano $\{%HOME}/.adaenv</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">. $\{%HOME}/.adaenv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add your relay(s) to ${%NODE_CONFIG}-topolgy.json.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">nano $\{%NODE_FILES}/$\{%NODE_CONFIG}-topology.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Use your LAN IPv4 for addr field if you are not using domain DNS. Be sure to have proper records set with your registrar or DNS service. Below are some examples.</p>
<p>Valency greater than one is only used with DNS round robin srv records.</p>
<p>{%% tabs %}
{%% tab title=&quot;1 Relay DNS&quot; %}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">\{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;Producers&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    \{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;addr&quot;: &quot;r1.example.com&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;port&quot;: 3001,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}</p>
<p>{%% tab title=&quot;2 Relays DNS&quot; %}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">\{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;Producers&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    \{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;addr&quot;: &quot;r1.example.com&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;port&quot;: 3001,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    \{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;addr&quot;: &quot;r2.example.com&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;port&quot;: 3002,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}</p>
<p>{%% tab title=&quot;1 Relay IPv4&quot; %}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">\{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;Producers&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    \{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;addr&quot;: &quot;192.168.1.151&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;port&quot;: 3001,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}</p>
<p>{%% tab title=&quot;2 Relays IPv4&quot; %}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">\{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;Producers&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    \{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;addr&quot;: &quot;192.168.1.151&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;port&quot;: 3001,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    \{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;addr&quot;: &quot;192.168.1.152&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;port&quot;: 3002,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;valency&quot;: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Restart and your node is now running as a core.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-service restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-pool-wallet-payment--staking-key-pairs">Create the pool wallet payment &amp; staking key pairs<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#create-the-pool-wallet-payment--staking-key-pairs">​</a></h2>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p><strong>Cold offlline machine.</strong> Take the time to visualize the operations here.</p><ol>
<li><em><strong>Generate</strong></em> a wallet key pair named payment. = <strong>payment.vkey</strong> &amp; <strong>payment.skey</strong></li>
<li><em><strong>Generate</strong></em> staking key pair. = <strong>stake.vkey</strong> &amp; <strong>stake.skey</strong></li>
<li><em><strong>Build</strong></em> a stake address from the newly created <strong>stake.vkey</strong>. = <strong>stake.addr</strong></li>
<li><em><strong>Build</strong></em> a wallet address from the <strong>payment.vkey</strong> &amp; delegate with <strong>stake.vkey</strong>. = <strong>payment.addr</strong></li>
<li>Add funds to the wallet by sending ada to <strong>payment.addr</strong></li>
<li>Check balance.</li>
</ol></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-generate-wallet-key-pair">1. Generate wallet key pair<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#1-generate-wallet-key-pair">​</a></h3>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd $\{%NODE_HOME}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli address key-gen \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --verification-key-file payment.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --signing-key-file payment.skey</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-generate-staking-key-pair">2. Generate staking key pair<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#2-generate-staking-key-pair">​</a></h3>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli stake-address key-gen \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --verification-key-file stake.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --signing-key-file stake.skey</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-build-stake-address">3. Build stake address<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#3-build-stake-address">​</a></h3>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli stake-address build \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --stake-verification-key-file stake.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file stake.addr \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-build-payment-address">4. Build payment address<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#4-build-payment-address">​</a></h3>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli address build \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --payment-verification-key-file payment.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --stake-verification-key-file stake.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file payment.addr \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-fund-wallet">5. Fund wallet<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#5-fund-wallet">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat payment.addr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Copy <strong>payment.addr</strong> to a thumb drive and move it to the core nodes pi-pool folder.</p>
<p>Add funds to the wallet. This is the only wallet the pool uses so your pledge goes here as well. There is a 2 ada staking registration fee and a 500 ada pool registration deposit that you can get back when retiring your pool.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Test the wallet by sending a small amount waiting a few minutes and querying it&#x27;s balance.</p></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Core node needs to be synced to the tip of the blockchain.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-check-balance">6. Check balance<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#6-check-balance">​</a></h3>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli query utxo \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --address $(cat payment.addr) \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-stake-address">Register stake address<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#register-stake-address">​</a></h2>
<p>Issue a staking registration certificate: <strong>stake.cert</strong></p>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli stake-address registration-certificate \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --stake-verification-key-file stake.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file stake.cert</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Copy <strong>stake.cert</strong> to your core node&#x27;s pi-pool folder.</p>
<p>Query current slot number or tip of the chain.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">slotNo=$(cardano-cli query tip --$\{%CONFIG_NET} | jq -r &#x27;.slot&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo slotNo: $\{%slotNo}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Get the utxo or balance of the wallet.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli query utxo \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --address $(cat payment.addr) \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET} &gt; fullUtxo.out</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tail -n +3 fullUtxo.out | sort -k3 -nr &gt; balance.out</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat balance.out</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tx_in=&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">total_balance=0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while read -r utxo; do</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  in_addr=$(awk &#x27;\{% print $1 }&#x27; &lt;&lt;&lt; &quot;$\{%utxo}&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  idx=$(awk &#x27;\{% print $2 }&#x27; &lt;&lt;&lt; &quot;$\{%utxo}&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  utxo_balance=$(awk &#x27;\{% print $3 }&#x27; &lt;&lt;&lt; &quot;$\{%utxo}&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  total_balance=$(($\{%total_balance}+$\{%utxo_balance}))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  echo TxHash: $\{%in_addr}#$\{%idx}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  echo Lovelace: $\{%utxo_balance}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  tx_in=&quot;$\{%tx_in} --tx-in $\{%in_addr}#$\{%idx}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">done &lt; balance.out</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">txcnt=$(cat balance.out | wc -l)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo Total ADA balance: $(($\{%total_balance} / 1000000))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo Number of UTXOs: $\{%txcnt}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>If you get</p><p><code>cardano-cli: Network.Socket.connect: : does not exist (No such file or directory)</code></p><p>It is because the core has not finished syncing to the tip of the blockchain. This can take a long time after a reboot. If you look in the db/ folder after cardano-service stop you will see a file named &#x27;clean&#x27;. That is confirmation file of a clean database shutdown. It usually takes 5 to 10 minutes to sync back to the tip of the chain on Raspberry Pi as of epoch 267.</p><p>If however the cardano-node does not shutdown &#x27;cleanly&#x27; for whatever reason it can take up to an hour to verify the database(chain) and create the socket file. Socket file is created once your synced.</p></div></div>
<p>Query --${%CONFIG_NET} for protocol parameters.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli query protocol-parameters \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file params.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Retrieve <strong>stakeAddressDeposit</strong> value from <strong>params.json</strong>.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">stakeAddressDeposit=$(cat $\{%NODE_HOME}/params.json | jq -r &#x27;.stakeAddressDeposit&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo stakeAddressDeposit : $\{%stakeAddressDeposit}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Stake address registration is 2,000,000 lovelace or 2 ada.</p></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Take note of the invalid-hereafter input. We are taking the current slot number(tip of the chain) and adding 1,000 slots. If we do not issue the signed transaction before the chain reaches this slot number the tx will be invalidated. A slot is one second so you have 16.666666667 minutes to get this done. 🐌</p></div></div>
<p>Build <strong>tx.tmp</strong> file to hold some information.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli transaction build-raw \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $\{%tx_in} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-out $(cat payment.addr)+0 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --invalid-hereafter $(( $\{%slotNo} + 1000)) \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --fee 0 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --certificate stake.cert \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file tx.tmp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Calculate the minimal fee.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">fee=$(cardano-cli transaction calculate-min-fee \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-body-file tx.tmp \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-in-count $\{%txcnt} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-out-count 1 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --witness-count 2 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --byron-witness-count 0 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --protocol-params-file params.json | awk &#x27;\{% print $1 }&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo fee: $fee</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Calculate txOut.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">txOut=$(($\{%total_balance}-$\{%stakeAddressDeposit}-$\{%fee}))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo Change Output: $\{%txOut}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Build the full transaction to register your staking address.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli transaction build-raw \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $\{%tx_in} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-out $(cat payment.addr)+$\{%txOut} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --invalid-hereafter $(( $\{%slotNo} + 10000)) \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --fee $\{%fee} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --certificate-file stake.cert \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file tx.raw</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Transfer <strong>tx.raw</strong> to your Cold offline machine and sign the transaction with the <strong>payment.skey</strong> and <strong>stake.skey</strong>.</p>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli transaction sign \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-body-file tx.raw \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --signing-key-file payment.skey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --signing-key-file stake.skey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file tx.signed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Move <strong>tx.signed</strong> transaction file back to the core nodes pi-pool folder.</p>
<p>Submit the transaction to the blockchain.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli transaction submit \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-file tx.signed \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-the-pool-">Register the pool 🏊<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#register-the-pool-">​</a></h2>
<p>Create a <strong>poolMetaData.json</strong> file. It will contain important information about your pool. You will need to host this file somewhere online forevermore. It must be online and you cannot edit it without resubmitting/updating your pool.cert. In the next couple steps we will hash</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>metadata-url must be less than 64 characters.</p></div></div>
<p>{%% embed url=&quot;<a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">https://pages.github.com/</a>&quot; %}
Hosting your poolMetaData.json on github is popular choice
{%% endembed %}</p>
<p>I say host it on your Pi with Nginx.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd $\{%NODE_HOME}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nano poolMetaData.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The <strong>extendedPoolMetaData.json</strong> file is used by adapools and others to scrape information like where to find your pool logo and social media links. Unlike the <strong>poolMetaData.json</strong> this files hash is not stored in your registration certificate and can be edited without having to rehash and resubmit <strong>pool.cert</strong>.</p></div></div>
<p>Add the following and customize to your metadata.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">\{%</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;name&quot;: &quot;Pool Name&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;description&quot;: &quot;Pool description, no longer than 255 characters.&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;ticker&quot;: &quot;AARCH&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;homepage&quot;: &quot;https://example.com/&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;extended&quot;: &quot;https://example.com/extendedPoolMetaData.json&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli stake-pool metadata-hash \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --pool-metadata-file poolMetaData.json &gt; poolMetaDataHash.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Copy poolMetaData.json to <a href="https://pages.github.io" target="_blank" rel="noopener noreferrer">https://pages.github.io</a> or host it yourself along with your website. Be careful not to accidentally insert a space or a new line, which would result in a different hash.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>--metadata-url must be 64 characters or less.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Here is my <strong>poolMetaData.json</strong> &amp; <strong>extendedPoolMetaData.json</strong> as a reference and shameless links back to my site. 😰</p><p><a href="https://adamantium.online/poolMetaData.json" target="_blank" rel="noopener noreferrer">https://adamantium.online/poolMetaData.json</a></p><p><a href="https://adamantium.online/extendedPoolMetaData.json" target="_blank" rel="noopener noreferrer">https://adamantium.online/extendedPoolMetaData.json​</a></p></div></div>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">minPoolCost=$(cat $\{%NODE_HOME}/params.json | jq -r .minPoolCost)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo minPoolCost: $\{%minPoolCost}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Use the format below to register single or multiple relays.</p>
<p>{%% tabs %}
{%% tab title=&quot;DNS Relay(1)&quot; %}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">--single-host-pool-relay &lt;r1.example.com&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--pool-relay-port &lt;R1 NODE PORT&gt; \</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}</p>
<p>{%% tab title=&quot;IPv4 Relay(1)&quot; %}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">--pool-relay-ipv4 &lt;RELAY NODE PUBLIC IP&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--pool-relay-port &lt;R1 NODE PORT&gt; \</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}</p>
<p>{%% tab title=&quot;DNS Relay(2)&quot; %}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">--single-host-pool-relay &lt;r1.example.com&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--pool-relay-port &lt;R1 NODE PORT&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--single-host-pool-relay &lt;r2.example.com&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--pool-relay-port &lt;R2 NODE PORT&gt; \</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}</p>
<p>{%% tab title=&quot;IPv4 Relay(2)&quot; %}</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">--pool-relay-ipv4 &lt;R1 NODE PUBLIC IP&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--pool-relay-port &lt;R1 NODE PORT&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--pool-relay-ipv4 &lt;R2 NODE PUBLIC IP&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--pool-relay-port &lt;R2 NODE PORT&gt; \</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Edit the information below to match your pools desired configuration.</p></div></div>
<p>Copy the vrf.vkey and poolMetaDataHash.txt to your cold machine and issue a stake pool registration certificate. Create a file name registration-cert.txt. Use this file to edit the below command before you issue it. It&#x27;s also handy to leave this file on the cold machine for any future edits. Below is 1,000 ada pledge, 340 cost and a 1% margin.</p>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cd $\{%NODE_HOME}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nano registration-cert.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>--metadata-url must be 64 characters or less.</p></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli stake-pool registration-certificate \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cold-verification-key-file $\{%HOME}/cold-keys/node.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --vrf-verification-key-file vrf.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --pool-pledge 10000000000 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --pool-cost 340000000 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --pool-margin 0.01 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --pool-reward-account-verification-key-file stake.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --pool-owner-stake-verification-key-file stake.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --single-host-pool-relay &lt;r1.example.com&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --pool-relay-port 3001 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --metadata-url &lt;https://example.com/poolMetaData.json&gt; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --metadata-hash $(cat poolMetaDataHash.txt) \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file pool.cert</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Issue a delegation certificate from <strong>stake.skey</strong> &amp; <strong>node.vkey</strong>.</p>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli stake-address delegation-certificate \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --stake-verification-key-file stake.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cold-verification-key-file $\{%HOME}/cold-keys/node.vkey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file deleg.cert</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Retrieve your stake pool id.</p>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli stake-pool id --cold-verification-key-file $\{%HOME}/cold-keys/node.vkey --output-format hex &gt; stakePoolId.txt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat stakePoolId.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Move <strong>pool.cert</strong>, <strong>deleg.cert</strong> &amp; <strong>stakePoolId.txt</strong> to your online core machine.</p>
<p>Query the current slot number or tip of the chain.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">slotNo=$(cardano-cli query tip --$\{%CONFIG_NET} | jq -r &#x27;.slot&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo slotNo: $\{%slotNo}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Get the utxo or balance of the wallet.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli query utxo \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --address $(cat payment.addr) \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET} &gt; fullUtxo.out</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tail -n +3 fullUtxo.out | sort -k3 -nr &gt; balance.out</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat balance.out</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">tx_in=&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">total_balance=0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">while read -r utxo; do</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  in_addr=$(awk &#x27;\{% print $1 }&#x27; &lt;&lt;&lt; &quot;$\{%utxo}&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  idx=$(awk &#x27;\{% print $2 }&#x27; &lt;&lt;&lt; &quot;$\{%utxo}&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  utxo_balance=$(awk &#x27;\{% print $3 }&#x27; &lt;&lt;&lt; &quot;$\{%utxo}&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  total_balance=$(($\{%total_balance}+$\{%utxo_balance}))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  echo TxHash: $\{%in_addr}#$\{%idx}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  echo Lovelace: $\{%utxo_balance}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  tx_in=&quot;$\{%tx_in} --tx-in $\{%in_addr}#$\{%idx}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">done &lt; balance.out</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">txcnt=$(cat balance.out | wc -l)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo Total ADA balance: $(($\{%total_balance} / 1000000))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo Number of UTXOs: $\{%txcnt}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Parse <strong>params.json</strong> for stake pool registration deposit value. Spoiler: it&#x27;s 500 ada but that could change in the future.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">stakePoolDeposit=$(cat $\{%NODE_HOME}/params.json | jq -r &#x27;.stakePoolDeposit&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo stakePoolDeposit: $\{%stakePoolDeposit}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Build temporary <strong>tx.tmp</strong> to hold information while we build our raw transaction file.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli transaction build-raw \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $\{%tx_in} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-out $(cat payment.addr)+$(( $\{%total_balance} - $\{%stakePoolDeposit}))  \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --invalid-hereafter $(( $\{%slotNo} + 10000)) \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --fee 0 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --certificate-file pool.cert \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --certificate-file deleg.cert \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file tx.tmp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Calculate the transaction fee.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">fee=$(cardano-cli transaction calculate-min-fee \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-body-file tx.tmp \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-in-count $\{%txcnt} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-out-count 1 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --witness-count 3 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --byron-witness-count 0 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --protocol-params-file params.json | awk &#x27;\{% print $1 }&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  echo fee: $\{%fee}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Calculate your change output.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">txOut=$(($\{%total_balance}-$\{%stakePoolDeposit}-$\{%fee}))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">echo txOut: $\{%txOut}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Build your <strong>tx.raw</strong> (unsigned) transaction file.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli transaction build-raw \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $\{%tx_in} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-out $(cat payment.addr)+$\{%txOut} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --invalid-hereafter $(( $\{%slotNo} + 10000)) \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --fee $\{%fee} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --certificate-file pool.cert \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --certificate-file deleg.cert \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file tx.raw</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Move <strong>tx.raw</strong> to your cold offline machine.</p>
<p>Sign the transaction with your <strong>payment.skey</strong>, <strong>node.skey</strong> &amp; <strong>stake.skey</strong>.</p>
<p>{%% tabs %}
{%% tab title=&quot;Cold Offline&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli transaction sign \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-body-file tx.raw \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --signing-key-file payment.skey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --signing-key-file $\{%HOME}/cold-keys/node.skey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --signing-key-file stake.skey \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET} \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --out-file tx.signed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<p>Move <strong>tx.signed</strong> back to your core node &amp; submit the transaction to the blockchain.</p>
<p>{%% tabs %}
{%% tab title=&quot;Core&quot; %}</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">&gt;_ Terminal</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cardano-cli transaction submit \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tx-file tx.signed \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --$\{%CONFIG_NET}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>{%% endtab %}
{%% endtabs %}</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-successful-registration">Confirm successful registration<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#confirm-successful-registration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="poolvet">pool.vet<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#poolvet">​</a></h3>
<p>pool.vet is a website for pool operators to check the validity of their stake pools on chain data. You can check this site for problems and clues as to how to fix them.</p>
<p>{%% embed url=&quot;<a href="https://pool.vet/" target="_blank" rel="noopener noreferrer">https://pool.vet/</a>&quot; %}</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="adapoolsorg">adapools.org<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#adapoolsorg">​</a></h3>
<p>You should create an account and claim your pool here.</p>
<p>{%% embed url=&quot;<a href="https://adapools.org/" target="_blank" rel="noopener noreferrer">https://adapools.org/</a>&quot; %}</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pooltoolio">pooltool.io<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#pooltoolio">​</a></h3>
<p>You should create an account and claim your pool here.</p>
<p>{%% embed url=&quot;<a href="https://pooltool.io/" target="_blank" rel="noopener noreferrer">https://pooltool.io/</a>&quot; %}</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="backups">Backups<a class="hash-link" aria-label="Direct link to heading" title="Direct link to heading" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#backups">​</a></h2>
<p>Get a couple small usb sticks and backup all your files and folders(except the db/ folder). Backup your online Core first then the Cold offline files and folders. <strong>Do it now</strong>, not worth the risk! <strong>Do not plug the USB stick into anything online after Cold files are on it!</strong></p>
<p><img decoding="async" loading="lazy" alt="https://twitter.com/insaladaPool/status/1380087586509709312?s=19" src="/docs/assets/images/insalada-8e298600620961dd1d14b98a2bdac8ab.png" width="598" height="911" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/armada-alliance/docs/edit/master/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#enable-blockfetch-tracing">Enable blockfetch tracing</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#generate-keys--issue-operational-certificate">Generate Keys &amp; Issue Operational Certificate</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#variables-for-guide-interopability">Variables for guide interopability</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#create-the-pool-wallet-payment--staking-key-pairs">Create the pool wallet payment &amp; staking key pairs</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#1-generate-wallet-key-pair">1. Generate wallet key pair</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#2-generate-staking-key-pair">2. Generate staking key pair</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#3-build-stake-address">3. Build stake address</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#4-build-payment-address">4. Build payment address</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#5-fund-wallet">5. Fund wallet</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#6-check-balance">6. Check balance</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#register-stake-address">Register stake address</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#register-the-pool-">Register the pool 🏊</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#confirm-successful-registration">Confirm successful registration</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#poolvet">pool.vet</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#adapoolsorg">adapools.org</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#pooltoolio">pooltool.io</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/stake-pool-guides/pi-pool-tutorial/pi-core-and-pi-cold#backups">Backups</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container--fluid"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">View</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="https://armada-alliance.com/">Website</a></li><li class="footer__item"><a class="footer__link-item" href="https://armada-alliance.com/docs/">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="https://www.youtube.com/channel/UCligunhcmbMYaBUMvONsKwg">Youtube</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="https://armada-alliance.com/identities">Users</a></li><li class="footer__item"><a class="footer__link-item" href="https://armada-alliance.com/stake-pools">Stake Pools</a></li><li class="footer__item"><a class="footer__link-item" href="https://github.com/armada-alliance/">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="https://t.me/joinchat/FeKTCBu-pn5OUZUz4joF2w">Telegram</a></li><li class="footer__item"><a class="footer__link-item" href="https://twitter.com/alliance_armada">Twitter</a></li><li class="footer__item"><a class="footer__link-item" href="https://discord.com/invite/Sqc398qk5a">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="https://cardano.ideascale.com/c/idea/397744">Project Catalyst</a></li><li class="footer__item"><a class="footer__link-item" href="https://armada-alliance.com/blogs">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="https://shop.armada-alliance.com">Store</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img style="height:px;width:150px" src="/docs/assets/images/armada-alliance-logo-168b5fc1739d8b60fff3e07da9d798e1.png"></div>Copyright © <!-- -->2024<!-- --> Armada Alliance.</div></div><div id="ms-floating-button" class="ms-fixed ms-bottom-4 ms-right-8 ms-z-[100] ms-flex ms-flex-col ms-items-end hover:ms-cursor-pointer"><div class="ms-relative ms-mb-4"><div style="background-color:#31373d" class="ms-absolute -ms-bottom-1 ms-right-6 -ms-z-10 ms-h-4 ms-w-4 ms-rotate-45"></div><div style="background-color:#31373d" class="ms-z-10 ms-flex ms-items-center ms-justify-center ms-rounded-lg ms-px-3 ms-py-2"><p style="color:#fff;margin:0" class="ms-text-sm">Hi, how can I help you?</p></div></div><div style="background-color:#31373d" class="ms-flex ms-h-16 ms-w-16 ms-flex-col ms-items-center ms-justify-center ms-self-end ms-rounded-full ms-p-2 ms-transition"><div class="ms-rotate-0 ms-flex ms-h-full ms-w-full ms-transform ms-cursor-pointer ms-items-center ms-justify-center ms-rounded-full ms-transition-all ms-delay-75 ms-duration-100 ms-ease-in-out"><img src="img/parrot2.png" width="75"></div></div><div></div></div></footer></div>
</body>
</html>