"use strict";(self.webpackChunkarmada_alliance_docusaurus=self.webpackChunkarmada_alliance_docusaurus||[]).push([[5687],{6094:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>c,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var i=s(4848),r=s(8453);const t={},d="Part 1: Getting your Raspberry Pi (rpi) Setup",a={id:"ergo-developer-guides/part1-raspi-setup",title:"Part 1: Getting your Raspberry Pi (rpi) Setup",description:"Time Allotment:",source:"@site/docs/ergo-developer-guides/part1-raspi-setup.md",sourceDirName:"ergo-developer-guides",slug:"/ergo-developer-guides/part1-raspi-setup",permalink:"/docs/ergo-developer-guides/part1-raspi-setup",draft:!1,unlisted:!1,editUrl:"https://github.com/armada-alliance/docs/edit/master/docs/ergo-developer-guides/part1-raspi-setup.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Tutorial: Running an Ergo Full Node on a Headless Raspberry Pi",permalink:"/docs/ergo-developer-guides/"},next:{title:"Part 2: Ergo Full Node Setup",permalink:"/docs/ergo-developer-guides/part2-ergo-full-node"}},o={},l=[{value:"Full Kit Equipment",id:"full-kit-equipment",level:2},{value:"Operating System (OS) Flashing Setup",id:"operating-system-os-flashing-setup",level:2},{value:"Hardware Assembly &amp; Checking Pi IP Address",id:"hardware-assembly--checking-pi-ip-address",level:3},{value:"Getting into your rpi",id:"getting-into-your-rpi",level:3},{value:"Update the pi and config updates",id:"update-the-pi-and-config-updates",level:3},{value:"External Hardware Mounting if booting from the SD Card",id:"external-hardware-mounting-if-booting-from-the-sd-card",level:2},{value:"Find the external drive device name",id:"find-the-external-drive-device-name",level:4},{value:"delete the default partitions",id:"delete-the-default-partitions",level:4},{value:"Create new partition with desired file type",id:"create-new-partition-with-desired-file-type",level:4},{value:"create a new filesystem",id:"create-a-new-filesystem",level:4},{value:"mount the drive and ensure it mounts on restart",id:"mount-the-drive-and-ensure-it-mounts-on-restart",level:4},{value:"References:",id:"references",level:3}];function h(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"part-1-getting-your-raspberry-pi-rpi-setup",children:"Part 1: Getting your Raspberry Pi (rpi) Setup"}),"\n",(0,i.jsx)(n.p,{children:"Time Allotment:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"1hr to order parts (if you don't have it). Estimate ~$200 USD."}),"\n",(0,i.jsx)(n.li,{children:"1hr-3hr to execute (depending on skill level and snags)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"rpi-bare-front-view.jpeg",src:s(787).A+"",width:"2210",height:"1578"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"full-kit-hardware",src:s(6529).A+"",width:"2911",height:"2434"})}),"\n",(0,i.jsx)(n.h2,{id:"full-kit-equipment",children:"Full Kit Equipment"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Micro SD card 8Gb+ & Adapter, ",(0,i.jsx)(n.a,{href:"https://www.amazon.com/s?k=micro+sd+card&rh=n%3A516866%2Cp_n_feature_two_browse-bin%3A6518304011&crid=YXIYMGJA97E7&nav_sdd=aps&rnid=6518301011&sprefix=micro+sd+card&ref=nb_sb_ss_w_sbl-tr-t1_micro-sd-card_k0_1_13_2",children:"Recommend: Amazon 32gb card ~$15"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["See rpi docs for sd cards ",(0,i.jsx)(n.a,{href:"https://www.raspberrypi.com/documentation/computers/getting-started.html#sd-cards-for-raspberry-pi",children:"here"})]}),"\n",(0,i.jsxs)(n.li,{children:["Check your computer for an SD Flash Drive slot (else you'll need to buy an external usb ",(0,i.jsx)(n.a,{href:"https://www.amazon.com/Reader-uni-Adapter-Aluminum-Memory/dp/B08P1T8R46/ref=sr_1_2?crid=2DL6CI2GH2MEM&keywords=sd%2Bcard%2Bexternal%2Bloader&qid=1694879165&sprefix=sd%2Bcard%2Bexternal%2Bloade%2Caps%2C121&sr=8-2&th=1",children:"loader"}),")."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Raspberry Pi 3b+ or 4 (tutorial is on a 3b+), ",(0,i.jsx)(n.a,{href:"https://www.raspberrypi.com/products/",children:"Pi Shop"}),", ",(0,i.jsx)(n.a,{href:"https://www.amazon.com/Raspberry-Model-2019-Quad-Bluetooth/dp/B07TC2BK1X/ref=sr_1_3?crid=3KZWTBP69R65N&keywords=raspberry%2Bpi&qid=1694884282&sprefix=raspberry%2Bpi%2Caps%2C138&sr=8-3&ufe=app_do%3Aamzn1.fos.18ed3cb5-28d5-4975-8bc7-93deae8f9840&th=1",children:"Recommend: Amazon Pi 4 ~$70"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"I would probably go with a Pi 4 and 4-to-8GB RAM. The 4s also seem like they are in stock, 3b+ have been sold out."}),"\n",(0,i.jsxs)(n.li,{children:["You might need a ",(0,i.jsx)(n.a,{href:"https://www.amazon.com/s?k=ethernet+cord+1ft&i=computers&rh=n%3A172463%2Cp_n_feature_ten_browse-bin%3A23555330011&dc&ds=v1%3AIBQGTMGU7%2BnNpwAG01LyZDeAYOOPSm0prjnrjrhh%2ByM&crid=1Z6K45XA6F1R4&qid=1694885121&rnid=23555276011&sprefix=ethernet+cord+1f%2Ccomputers%2C124&ref=sr_nr_p_n_feature_ten_browse-bin_2",children:"1ft USB cord"})," if the rpi is close to your router, recommend hard line connection, though wifi is okay too"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["External Solid State Drive (SSD) memory, ",(0,i.jsx)(n.a,{href:"https://www.amazon.com/Crucial-MX500-NAND-SATA-Internal/dp/B078211KBB/ref=d_pd_sim_sccl_4_1/147-8461889-8258503?pd_rd_w=58YeQ&content-id=amzn1.sym.2351c4aa-bb60-45da-95b0-d52caf1c26f1&pf_rd_p=2351c4aa-bb60-45da-95b0-d52caf1c26f1&pf_rd_r=PJW12MM5M27HTY3TJ7VH&pd_rd_wg=FyYif&pd_rd_r=46296c39-6582-4147-9883-869c83e46687&pd_rd_i=B078211KBB&th=1",children:"Recommend: Amazon SATA SSD 1Tb ~$80"})]}),"\n",(0,i.jsxs)(n.li,{children:["SSD Case & Cord, ",(0,i.jsx)(n.a,{href:"https://www.amazon.com/ORICO-External-Enclosure-Support-Tool-Free/dp/B01LY97QE8/ref=d_pd_sim_sccl_4_26/147-8461889-8258503?pd_rd_w=v30UK&content-id=amzn1.sym.2351c4aa-bb60-45da-95b0-d52caf1c26f1&pf_rd_p=2351c4aa-bb60-45da-95b0-d52caf1c26f1&pf_rd_r=CR5YJYDZ5K5ZMD98S98P&pd_rd_wg=t811H&pd_rd_r=b3838bb0-cdd9-45fa-81ff-c03d3fbba4cb&pd_rd_i=B01LY97QE8&th=1",children:"Recommend: Amazon ORICO 2.5'' External Hard Drive Enclosure ~$7"})]}),"\n",(0,i.jsxs)(n.li,{children:["Raspberry Pi Power Cord, ",(0,i.jsx)(n.a,{href:"https://www.raspberrypi.com/products/type-c-power-supply/",children:"Pi 4 Shop recommended ~$8"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Be careful! The Pi 3b+ has a different power cord than the Pi 4! The Pi 4 requires more power."}),"\n",(0,i.jsx)(n.li,{children:"However, the Pi 4 power has a USB-C that can be used on the 3b+, I use it and works fine."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Raspberry Pi Case, ",(0,i.jsx)(n.a,{href:"https://www.amazon.com/Flirc-Raspberry-Case-Gen2-Model/dp/B07349HT26/ref=sr_1_15?crid=355HS8YRL4UE8&keywords=raspberry%2Bpi%2Bcase%2Bmetal&qid=1694885842&s=pc&sprefix=raspberry%2Bpi%2Bcase%2Bmetal%2Ccomputers%2C124&sr=1-15&th=1",children:"Recommend Amazon Flirc metal case"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Just make sure the case is a good heat sink, has a fan, or airflow."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"setup--configuration",children:"Setup & Configuration"}),"\n",(0,i.jsx)(n.h2,{id:"operating-system-os-flashing-setup",children:"Operating System (OS) Flashing Setup"}),"\n",(0,i.jsx)(n.p,{children:'This part covers "flashing" (writing) the raspberry pi Operating System (OS) into firmware memory.'}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"\ud83d\udca1 HEADS-UP: The first tutorial trials flashed the OS right to the SD Card. It quickly became apparent the RAM & Log storage filled up the SD Card memory (30MB). In fact, you can actually flash and boot up right into the external USB storage drive, no mounting required either!"})}),"\n",(0,i.jsxs)(n.p,{children:["Download the ",(0,i.jsx)(n.a,{href:"https://www.raspberrypi.com/software/",children:"Raspberry Pi Imager"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You could follow the ",(0,i.jsx)(n.a,{href:"https://www.raspberrypi.com/documentation/computers/getting-started.html#installing-the-operating-system",children:"Raspberry Pi Documentation: Installing the Operating System"}),", however I found watching the following youtube video much more helpful and easier to get an idea of what we're doing: ",(0,i.jsx)(n.a,{href:"https://youtu.be/wQJqwGVNHTM?si=GzJZh4_am2cLS1gL",children:"Youtube: Headless Raspberry Pi Zero Setup"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Open the Raspberry Pi Imager GUI"}),"\n",(0,i.jsxs)(n.li,{children:["Choose Raspberry Pi OS ",(0,i.jsx)(n.strong,{children:"Lite"}),' 64bit under "Raspberry Pi OS (other)"',"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"32-bit is the safe option. Seems 64bit OS is compatible and tested with the 3b+"}),"\n",(0,i.jsx)(n.li,{children:"Lite for headless (no Desktop GUIs)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Plug in the external USB storage drive"}),"\n",(0,i.jsx)(n.li,{children:"Choose the external memory to write to in the rpi GUI"}),"\n",(0,i.jsx)(n.li,{children:"Bottom right click gear for advanced settings options"}),"\n",(0,i.jsxs)(n.li,{children:["Set hostname, rename raspberrypi to ",(0,i.jsx)(n.strong,{children:'"headless"'}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"you can use your own username but the headless is used in this tutorial"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Yes Enable SSH"}),"\n",(0,i.jsx)(n.li,{children:'Yes "Use password authentication"'}),"\n",(0,i.jsx)(n.li,{children:"Fill in username and password to login to the rpi."}),"\n",(0,i.jsxs)(n.li,{children:["Update username to ",(0,i.jsx)(n.strong,{children:'"pi"'})," (or whatever name you want but pi is used here)"]}),"\n",(0,i.jsxs)(n.li,{children:["Yes Enable it to connec to the wifi","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Note SSID is home "wifi name"'}),"\n",(0,i.jsx)(n.li,{children:"Type in the password"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Save"}),"\n",(0,i.jsx)(n.li,{children:"Write"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The first time takes a few minutes, grab a coffee \u2615"}),"\n",(0,i.jsx)(n.h3,{id:"hardware-assembly--checking-pi-ip-address",children:"Hardware Assembly & Checking Pi IP Address"}),"\n",(0,i.jsx)(n.p,{children:"Assembly the rpi and connect it to your router. Trust me this saves time because you'll check your router for headless.local IP address."}),"\n",(0,i.jsx)(n.p,{children:"However, upon boot up it should connect on your wifi, and from your router page, you should be able to find it connected. (Type in your router 192.168.XXX.YYY into your browser)."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Put the pi in the case"}),"\n",(0,i.jsx)(n.li,{children:"Connect the flashed memory into in rpi"}),"\n",(0,i.jsx)(n.li,{children:"Connect the rpi to power"}),"\n",(0,i.jsx)(n.li,{children:"Connect it to your Internet Router hardlined via ethernet connection (easier to troubleshoot, can do wifi later)"}),"\n",(0,i.jsx)(n.li,{children:"Put the SSD Drive into the case, but do not connect it to the rpi yet!"}),"\n",(0,i.jsx)(n.li,{children:"Pi takes about 5 minutes to boot up. Wait 5 minutes before trying to ssh in."}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"getting-into-your-rpi",children:"Getting into your rpi"}),"\n",(0,i.jsx)(n.p,{children:"Now this part can be daunting, but let's dive in."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Open terminal (use your mac or windows search, type in terminal)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:['Unfamilar? Youtube "command line terminal tutorial ',(0,i.jsx)(n.strong,{children:"your_operating_system_here"}),'" (e.g. command line terminal tutorial macos)']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Secure shell into the rpi, if setup correctly this should work."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh pi@headless.local\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Recall ",(0,i.jsx)(n.code,{children:"pi"})," is the username and ",(0,i.jsx)(n.code,{children:"headless.local"})," is the IP address."]}),"\n",(0,i.jsx)(n.p,{children:'If you get this warning "WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!" Odds are you already have known ssh keys into the pi. You\'ll need to delete them and basically start fresh.'}),"\n",(0,i.jsxs)(n.p,{children:["cd to home, then cd into the hidden ",(0,i.jsx)(n.code,{children:".ssh"})," folder"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd\ncd .ssh\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Next you'll open the known_hosts folder which keeps the username public keys. You'll then delete all the former ",(0,i.jsx)(n.a,{href:"mailto:pi@headless.local",children:"pi@headless.local"})," logins"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo nano known_hosts\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Ctrl+k"})," on the lines with headless to wipe them out (nice little trick)."]}),"\n",(0,i.jsx)(n.p,{children:"If there are still ssh failed attempts, in terminal:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"cd //to home folder (directory)"}),"\n",(0,i.jsx)(n.li,{children:"cd .ssh //directories with a dot in front are hidden"}),"\n",(0,i.jsx)(n.li,{children:"nano known_hosts //to check ssh connections"}),"\n",(0,i.jsx)(n.li,{children:"(need to troubleshoot further...)"}),"\n",(0,i.jsxs)(n.li,{children:["ssh? ",(0,i.jsx)(n.a,{href:"https://www.makeuseof.com/what-is-ssh/",children:"Article: What is SSH?"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"update-the-pi-and-config-updates",children:"Update the pi and config updates"}),"\n",(0,i.jsx)(n.p,{children:"Update & upgrade the pi packages"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get upgrade \n"})}),"\n",(0,i.jsx)(n.p,{children:"This is where most of the configuration is done for the rpi. Feel free to explore it."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo raspi-config\n"})}),"\n",(0,i.jsx)(n.p,{children:"Congrats! That's it (much easier to boot right from the external memory, already mounted and partitioned)."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"external-hardware-mounting-if-booting-from-the-sd-card",children:"External Hardware Mounting if booting from the SD Card"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"IF"})})," you chose the hard route, flashing and booting from the SD Card and using a separate external USB memory storage, you'll have to perform these steps."]}),"\n",(0,i.jsx)(n.p,{children:"This is to allow the external SSD drive memory to be attached and not freeze the rpi. This does not come default in Lite."}),"\n",(0,i.jsx)(n.p,{children:"You'll probably notice your rpi did not boot up if you booted from the SD Card and have the external memory already connected."}),"\n",(0,i.jsx)(n.p,{children:"You'll need to reboot (remove power) and disconnect the USB memory. Then start up."}),"\n",(0,i.jsx)(n.p,{children:"This is a little involved so prepare yourself for battle!"}),"\n",(0,i.jsx)(n.p,{children:"=====Mounting Hard Drive===="}),"\n",(0,i.jsx)(n.h4,{id:"find-the-external-drive-device-name",children:"Find the external drive device name"}),"\n",(0,i.jsxs)(n.p,{children:["Lists all memory disks and partitions. More on ",(0,i.jsx)(n.a,{href:"https://wiki.archlinux.org/title/Fdisk",children:"fdisk"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo fdisk -l\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The SATA SSD external memory here is ",(0,i.jsx)(n.code,{children:"Disk /dev/sda: 931.51 GiB"}),". It is identified as ",(0,i.jsx)(n.code,{children:"/dev/sda"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"It is by default listed with two partitions:"}),"\n",(0,i.jsx)(n.p,{children:"Device      Start        End    Sectors   Size Type\n/dev/sda 409640 1953525127 1953115488 931.3G ext4"}),"\n",(0,i.jsx)(n.p,{children:"Now we need to delete the partitions and create a new one with a desirable file storage type ext4 just in case it's not already ext4."}),"\n",(0,i.jsx)(n.h4,{id:"delete-the-default-partitions",children:"delete the default partitions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo fdisk /dev/sda\n"})}),"\n",(0,i.jsx)(n.p,{children:'You should see "Welcome to fdisk (util-linus version)"'}),"\n",(0,i.jsxs)(n.p,{children:["Type in ",(0,i.jsx)(n.code,{children:"d"})," to delete the partitions (repeat until they are all gone)."]}),"\n",(0,i.jsx)(n.p,{children:"Hit enter to default select the partition to delete."}),"\n",(0,i.jsx)(n.h4,{id:"create-new-partition-with-desired-file-type",children:"Create new partition with desired file type"}),"\n",(0,i.jsxs)(n.p,{children:["Type in ",(0,i.jsx)(n.code,{children:"n"})," to create a new partition."]}),"\n",(0,i.jsx)(n.p,{children:"Hit enter for default 3 times"}),"\n",(0,i.jsx)(n.p,{children:"You should see \"Created a new partition 1 of type 'Linux filesystem' and of size 931.5 GiB.\""}),"\n",(0,i.jsxs)(n.p,{children:["To check, type in ",(0,i.jsx)(n.code,{children:"p"})," for partition. Mine looks like this:"]}),"\n",(0,i.jsxs)(n.p,{children:["Command (m for help): p\nDisk /dev/sda: 931.51 GiB, 1000204886016 bytes, 1953525168 sectors\nDisk model: 500SSD1",(0,i.jsx)(n.br,{}),"\n","Units: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O size (minimum/optimal): 4096 bytes / 4096 bytes\nDisklabel type: gpt\nDisk identifier: A59F918E-3EBE-445F-8E0D-951CD93129C8"]}),"\n",(0,i.jsx)(n.p,{children:"Device     Start        End    Sectors   Size Type\n/dev/sda1   2048 1953525134 1953523087 931.5G Linux filesystem"}),"\n",(0,i.jsxs)(n.p,{children:["To confirm, type in ",(0,i.jsx)(n.code,{children:"w"})," to write this to disk."]}),"\n",(0,i.jsx)(n.p,{children:'You should see "The partition table has been altered."'}),"\n",(0,i.jsx)(n.p,{children:"To check:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo fdisk -l\n"})}),"\n",(0,i.jsxs)(n.p,{children:["My final version looks like this. Note the ",(0,i.jsx)(n.code,{children:"dev/sda1"})," Device name and ",(0,i.jsx)(n.code,{children:"Disk identifier"})," number. We'll need those later:"]}),"\n",(0,i.jsxs)(n.p,{children:["Disk /dev/sda: 931.51 GiB, 1000204886016 bytes, 1953525168 sectors\nDisk model: 500SSD1",(0,i.jsx)(n.br,{}),"\n","Units: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O size (minimum/optimal): 4096 bytes / 4096 bytes\nDisklabel type: gpt\nDisk identifier: A59F918E-3EBE-445F-8E0D-951CD93129C8"]}),"\n",(0,i.jsx)(n.p,{children:"Device     Start        End    Sectors   Size Type\n/dev/sda1   2048 1953525134 1953523087 931.5G Linux filesystem"}),"\n",(0,i.jsx)(n.h4,{id:"create-a-new-filesystem",children:"create a new filesystem"}),"\n",(0,i.jsxs)(n.p,{children:["What is a filesystem? ",(0,i.jsx)(n.a,{href:"https://wiki.archlinux.org/title/File_systems#Create_a_file_system",children:"Arch Linux, filesystem, wiki"}),", a goto resource says:"]}),"\n",(0,i.jsx)(n.p,{children:'"In computing, a file system or filesystem controls how data is stored and retrieved. Without a file system, information placed in a storage medium would be one large body of data with no way to tell where one piece of information stops and the next begins. By separating the data into pieces and giving each piece a name, the information is easily isolated and identified."'}),"\n",(0,i.jsxs)(n.p,{children:["Let's make the filesystem of storage an ",(0,i.jsx)(n.code,{children:"ext4"})," type compatible with rpi OS / linux."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo mkfs -t ext4 /dev/sda1\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Where ",(0,i.jsx)(n.code,{children:"dev/sda1"})," is the new partition name pointer."]}),"\n",(0,i.jsx)(n.h4,{id:"mount-the-drive-and-ensure-it-mounts-on-restart",children:"mount the drive and ensure it mounts on restart"}),"\n",(0,i.jsx)(n.p,{children:'If not already create, make a "mount" /mnt directory, and name a file within, here hd1 for harddrive1.'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo mkdir /mnt/hd1\n"})}),"\n",(0,i.jsx)(n.p,{children:"Next, change the permissions or ownership of the folder from super user root to regular user."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo chown $USER:$USER /mnt/hd1\n"})}),"\n",(0,i.jsx)(n.p,{children:"Note:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/chown",children:"chmod"}),' is the command to "change owner" or access to file systems.']}),"\n",(0,i.jsxs)(n.li,{children:["pi",":pi"," in this tutorial is specific for user",":user",", where user",":user"," is the general case. If not sure, type in ",(0,i.jsx)(n.code,{children:"users"})," in terminal."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo blkid\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Where ",(0,i.jsx)(n.a,{href:"https://man7.org/linux/man-pages/man8/blkid.8.html",children:"blkid"})," locates or prints block devices. A ",(0,i.jsx)(n.a,{href:"https://unix.stackexchange.com/questions/259193/what-is-a-block-device",children:"block device"}),' reads/writes to memory one "block" at a time.']}),"\n",(0,i.jsxs)(n.p,{children:["Grab the ",(0,i.jsx)(n.code,{children:"/dev/sda1"})," UUID #"]}),"\n",(0,i.jsx)(n.p,{children:"Here's what my output looks like:"}),"\n",(0,i.jsx)(n.p,{children:'pi@headless:/mnt $ sudo blkid\n/dev/mmcblk0p1: LABEL_FATBOOT="bootfs" LABEL="bootfs" UUID="9E81-4F92" BLOCK_SIZE="512" TYPE="vfat" PARTUUID="2ac7bef0-01"\n/dev/mmcblk0p2: LABEL="rootfs" UUID="cf2895ca-6dc2-4797-8040-f76ba1508f41" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="2ac7bef0-02"\n/dev/zram0: UUID="9ba6ae2f-9e71-4ee1-84f3-b5a32d78cf7f" TYPE="swap"\n/dev/sda1: UUID="38e049f5-e511-49a3-a784-f8dad186303c" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="17672728-73c0-ad44-b194-941fcccad345"'}),"\n",(0,i.jsxs)(n.p,{children:["Specifically ",(0,i.jsx)(n.code,{children:"38e049f5-e511-49a3-a784-f8dad186303c"})]}),"\n",(0,i.jsxs)(n.p,{children:["Time to mount. What is mounting a drive? ",(0,i.jsx)(n.a,{href:"https://unix.stackexchange.com/questions/3192/what-is-meant-by-mounting-a-device-in-linux",children:"Stackexchange"})," says:"]}),"\n",(0,i.jsx)(n.p,{children:'"Mounting is the act of associating a storage device to a particular location in the directory tree."'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/fstab\n"})}),"\n",(0,i.jsx)(n.p,{children:"This gets inside the file to locate the mounted memory storage partition."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://wiki.archlinux.org/title/Fstab",children:"fstab"})," is used to define how disk partitions, various other block devices, or remote file systems should be mounted into the file system."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"UUID=<UUID_number_here> /mnt/hd1 ext4 nosuid,nodev,nofail 0 1\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For me it is ",(0,i.jsx)(n.code,{children:"UUID=38e049f5-e511-49a3-a784-f8dad186303c /mnt/hd1 ext4 nosuid,nodev,nofail 0 1"})]}),"\n",(0,i.jsx)(n.p,{children:"nofail allows the server to boot if the drive is not inserted. Similar for the others."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo mount -a\n"})}),"\n",(0,i.jsx)(n.p,{children:"To execute everything in the fstab file"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"lsblk\n"})}),"\n",(0,i.jsx)(n.p,{children:"Lists the memory"}),"\n",(0,i.jsxs)(n.p,{children:["pi@headless:~ $ lsblk\nNAME        MAJ",":MIN"," RM   SIZE RO TYPE MOUNTPOINT\nsda           8:0    0 931.5G  0 disk\n\u2514\u2500sda1        8:1    0 931.5G  0 part /mnt/hd1\nmmcblk0     179:0    0  29.8G  0 disk\n\u251c\u2500mmcblk0p1 179:1    0   256M  0 part /boot\n\u2514\u2500mmcblk0p2 179:2    0  29.6G  0 part /\nzram0       254:0    0   5.7G  0 disk [SWAP]"]}),"\n",(0,i.jsx)(n.p,{children:"sda1 looks good"}),"\n",(0,i.jsx)(n.p,{children:"To check the read write works"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd /mnt/hd1/\ntouch test \n"})}),"\n",(0,i.jsxs)(n.p,{children:["you'll get ",(0,i.jsx)(n.code,{children:"touch: cannot touch 'test': Permission denied"})]}),"\n",(0,i.jsxs)(n.p,{children:["so ",(0,i.jsx)(n.code,{children:"cd"})," up a level and change mode on the directory"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ..\nsudo chmod -R 777 hd1 \n"})}),"\n",(0,i.jsx)(n.p,{children:"changes permissions in directory hd1 to read write"}),"\n",(0,i.jsx)(n.p,{children:"To test it works"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd hd1 \ntouch test\n"})}),"\n",(0,i.jsx)(n.p,{children:"it should work now"}),"\n",(0,i.jsx)(n.p,{children:"too make sure, we need to reboot"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo reboot now \n"})}),"\n",(0,i.jsx)(n.p,{children:"ssh back in (takes 1-3 minutes to reboot)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh pi@headless.local\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd /mnt/hd1 \ntouch test2\nls\n"})}),"\n",(0,i.jsx)(n.p,{children:'If you see "test" and "test2", you did it right.'}),"\n",(0,i.jsx)(n.p,{children:"Now, the last thing is to make sure the newly mounted filesystems are read-write."}),"\n",(0,i.jsxs)(n.p,{children:["type in ",(0,i.jsx)(n.code,{children:"mount"}),' to see everything mounted and the "rw" for read-write.']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mount\n"})}),"\n",(0,i.jsx)(n.p,{children:"You should see /dev/sda1 and read-write (rw) capable:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/dev/sda1 on /mnt/hd1 type ext4 (rw,nosuid,nodev,relatime)"})}),"\n",(0,i.jsx)(n.p,{children:"If it's not rw, make the mounting directory read-write:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo mount -o remount,rw /mnt/hd1\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This enables you to move files from the home directory to the mounted sda1 storage in ",(0,i.jsx)(n.code,{children:"/mnt/hd1"})]}),"\n",(0,i.jsx)(n.p,{children:"Congrats! You made it. No small feat."}),"\n",(0,i.jsx)(n.h3,{id:"references",children:"References:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://youtu.be/eQZdPlMH-X8?si=my9CWTv5gJ82yXq_",children:"Youtube, Connect a HardDrive / USB Stick on a RaspberryPi (From Terminal) | 4K TUTORIAL, by SpaceRex"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://armada-alliance.com/docs/stake-pool-guides/pi-pool-tutorial/pi-node-full-guide/core-online#mount-the-drive-at-boot",children:"Armada Alliance Doc, Pi-Node, Mount the drive at boot"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.digikey.com/en/maker/blogs/2022/how-to-connect-a-drive-hddssd-to-a-raspberry-pi-or-other-linux-computers",children:"Digikey how to mount an external harddrive"})}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},787:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/rpi-bare-front-view-86cce8fc0895667dfdb04da3b1b77566.jpeg"},6529:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/rpi-finished-seperate-top-view-94f680dc1ff082050be53c46e996f94d.jpeg"},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var i=s(6540);const r={},t=i.createContext(r);function d(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);